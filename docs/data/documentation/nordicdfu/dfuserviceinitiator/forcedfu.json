{"abstract":[{"type":"text","text":"Should the Legacy DFU service assume the device is in bootloader mode despite"},{"type":"text","text":" "},{"text":"absence of the DFU Version characteristic.","type":"text"}],"hierarchy":{"paths":[["doc:\/\/NordicDFU\/documentation\/NordicDFU","doc:\/\/NordicDFU\/documentation\/NordicDFU\/DFUServiceInitiator"]]},"schemaVersion":{"major":0,"minor":3,"patch":0},"kind":"symbol","identifier":{"interfaceLanguage":"swift","url":"doc:\/\/NordicDFU\/documentation\/NordicDFU\/DFUServiceInitiator\/forceDfu"},"sections":[],"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"text":"@objc","kind":"attribute"},{"text":" ","kind":"text"},{"kind":"keyword","text":"var"},{"text":" ","kind":"text"},{"kind":"identifier","text":"forceDfu"},{"kind":"text","text":": "},{"text":"Bool","preciseIdentifier":"s:Sb","kind":"typeIdentifier"}],"languages":["swift"],"platforms":["macOS"]}]},{"kind":"content","content":[{"type":"heading","level":2,"anchor":"discussion","text":"Discussion"},{"name":"Important","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This property is only meaningful for devices supporting Legacy DFU without"},{"type":"text","text":" "},{"type":"text","text":"DFU Version characteristic  (nRF5 SDK 4.3 - 7) and is ignored otherwise."}]}],"type":"aside","style":"important"},{"inlineContent":[{"type":"text","text":"Setting this property to "},{"type":"codeVoice","code":"true"},{"type":"text","text":" will prevent from jumping to the DFU Bootloader"},{"text":" ","type":"text"},{"type":"text","text":"mode in case there is no DFU Version characteristic. Use it if the DFU operation"},{"text":" ","type":"text"},{"type":"text","text":"can be handled by your device running in the application mode. If the DFU Version"},{"type":"text","text":" "},{"text":"characteristic exists, the information whether to begin DFU operation, or jump to","type":"text"},{"text":" ","type":"text"},{"text":"bootloader, is taken from the characteristic’s value. The value returned equal to","type":"text"},{"text":" ","type":"text"},{"type":"codeVoice","code":"0x0100"},{"type":"text","text":" (read as: minor=1, major=0, or version 0.1) means that the device is in the"},{"text":" ","type":"text"},{"text":"application mode and buttonless jump to DFU Bootloader is supported.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Currently, the following values of the DFU Version characteristic are supported:"}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"No DFU Version characteristic"}]},{"text":" - one of the first implementations of DFU Service.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"The device may support only Application update (version from SDK 4.3.0), may support"},{"text":" ","type":"text"},{"text":"Soft Device, Bootloader and Application update but without buttonless jump to","type":"text"},{"type":"text","text":" "},{"type":"text","text":"bootloader (SDK 6.0.0) or with buttonless jump (SDK 6.1.0)."}]},{"inlineContent":[{"type":"text","text":"The DFU Library determines whether the device is in application mode or in DFU"},{"type":"text","text":" "},{"text":"Bootloader mode by counting number of services: if no DFU Service found - device","type":"text"},{"type":"text","text":" "},{"type":"text","text":"is in app mode and does not support buttonless jump, if the DFU Service is the only"},{"text":" ","type":"text"},{"type":"text","text":"service found (except General Access and General Attribute services) - it assumes"},{"type":"text","text":" "},{"text":"it is in DFU Bootloader mode and may start DFU immediately, if there is at least","type":"text"},{"type":"text","text":" "},{"text":"one service except DFU Service - the device is in application mode and supports","type":"text"},{"type":"text","text":" "},{"text":"buttonless jump. In the last case, you want to perform DFU operation without","type":"text"},{"text":" ","type":"text"},{"text":"jumping - set the ","type":"text"},{"type":"codeVoice","code":"forceDfu"},{"type":"text","text":" property to "},{"type":"codeVoice","code":"true"},{"type":"text","text":"."}],"type":"paragraph"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"0.1"}]},{"type":"text","text":" - Device is in a mode that supports buttonless jump to the DFU Bootloader."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"0.5"}]},{"type":"text","text":" - Device can handle DFU operation. Extended Init packet is required."},{"text":" ","type":"text"},{"type":"text","text":"Bond information is lost in the bootloader mode and after updating an app."},{"type":"text","text":" "},{"type":"text","text":"Released in SDK 7.0.0."}]},{"inlineContent":[{"inlineContent":[{"type":"text","text":"0.6"}],"type":"strong"},{"text":" - Bond information is kept in bootloader mode and may be kept after","type":"text"},{"text":" ","type":"text"},{"text":"updating application (DFU Bootloader must be configured to preserve the bond","type":"text"},{"type":"text","text":" "},{"type":"text","text":"information)."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"0.7"}],"type":"strong"},{"type":"text","text":" - The SHA-256 firmware hash is used in the Extended Init Packet instead"},{"text":" ","type":"text"},{"type":"text","text":"of CRC-16. This feature is transparent for the DFU Service."}]},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"0.8","type":"text"}]},{"type":"text","text":" - The Extended Init Packet is signed using the private key. The bootloader,"},{"text":" ","type":"text"},{"type":"text","text":"using the public key, is able to verify the content. Released in SDK 9.0.0 as"},{"type":"text","text":" "},{"text":"experimental feature.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"Caution! The firmware type (Application, Bootloader, SoftDevice or SoftDevice +"},{"text":" ","type":"text"},{"type":"text","text":"Bootloader) is not encrypted as it is not a part of the Extended Init Packet."},{"text":" ","type":"text"},{"type":"text","text":"A change in the protocol will be required to fix this issue."}],"type":"paragraph"},{"inlineContent":[{"text":"By default the DFU Library will try to switch the device to the DFU Bootloader","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"mode if it finds more services then one (DFU Service). It assumes it is already"},{"type":"text","text":" "},{"text":"in the bootloader mode if the only service found is the DFU Service. Setting the","type":"text"},{"text":" ","type":"text"},{"code":"forceDfu","type":"codeVoice"},{"text":" to ","type":"text"},{"type":"codeVoice","code":"true"},{"text":" will prevent from jumping in these both cases.","type":"text"}],"type":"paragraph"}]}],"metadata":{"externalID":"c:@M@NordicDFU@objc(cs)DFUServiceInitiator(py)forceDfu","title":"forceDfu","modules":[{"name":"NordicDFU"}],"symbolKind":"property","fragments":[{"text":"var","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"forceDfu"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:Sb","text":"Bool","kind":"typeIdentifier"}],"roleHeading":"Instance Property","role":"symbol"},"variants":[{"paths":["\/documentation\/nordicdfu\/dfuserviceinitiator\/forcedfu"],"traits":[{"interfaceLanguage":"swift"}]}],"references":{"doc://NordicDFU/documentation/NordicDFU/DFUServiceInitiator":{"title":"DFUServiceInitiator","type":"topic","kind":"symbol","identifier":"doc:\/\/NordicDFU\/documentation\/NordicDFU\/DFUServiceInitiator","abstract":[{"text":"The initiator object should be used to initiate updating firmware","type":"text"},{"text":" ","type":"text"},{"text":"on a remote Bluetooth LE target compatible with the Nordic Semiconductor’s Legacy or","type":"text"},{"type":"text","text":" "},{"type":"text","text":"Secure DFU (Device Firmware Update) protocol from nRF5 SDK."}],"role":"symbol","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"text":"DFUServiceInitiator","kind":"identifier"}],"navigatorTitle":[{"kind":"identifier","text":"DFUServiceInitiator"}],"url":"\/documentation\/nordicdfu\/dfuserviceinitiator"},"doc://NordicDFU/documentation/NordicDFU/DFUServiceInitiator/forceDfu":{"identifier":"doc:\/\/NordicDFU\/documentation\/NordicDFU\/DFUServiceInitiator\/forceDfu","kind":"symbol","role":"symbol","fragments":[{"kind":"keyword","text":"var"},{"text":" ","kind":"text"},{"text":"forceDfu","kind":"identifier"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:Sb","kind":"typeIdentifier","text":"Bool"}],"url":"\/documentation\/nordicdfu\/dfuserviceinitiator\/forcedfu","abstract":[{"text":"Should the Legacy DFU service assume the device is in bootloader mode despite","type":"text"},{"text":" ","type":"text"},{"text":"absence of the DFU Version characteristic.","type":"text"}],"type":"topic","title":"forceDfu"},"doc://NordicDFU/documentation/NordicDFU":{"url":"\/documentation\/nordicdfu","title":"NordicDFU","role":"collection","kind":"symbol","abstract":[],"type":"topic","identifier":"doc:\/\/NordicDFU\/documentation\/NordicDFU"}}}